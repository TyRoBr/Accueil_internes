<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Internat Brest - Acc√®s</title>
    <style>
        /* Styles Globaux */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2d2654 0%, #3b9fc9 100%);
            min-height: 100vh;
        }
        
        /* Bouton Global */
        .btn {
            padding: 12px 24px;
            background: #2d2654;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 16px;
        }
        
        .btn:hover {
            background: #3b9fc9;
        }

        /* LOGIN PAGE */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .login-box {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .login-box h2 {
            color: #2d2654;
            margin-bottom: 25px;
            font-size: 28px;
        }

        .login-box input {
            width: 100%;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            text-align: center;
        }

        .login-box input:focus {
            outline: none;
            border-color: #3b9fc9;
        }

        .login-error {
            color: #c0392b;
            margin-top: -10px;
            margin-bottom: 15px;
            font-weight: 600;
            font-size: 14px;
            display: none;
        }

        /* MAIN APP */
        .app-container {
            display: none;
            min-height: 100vh;
        }
        
        .navbar {
            background: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            padding: 0;
        }
        
        .navbar-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
        }
        
        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .navbar-logo {
            height: 60px;
        }
        
        .navbar-menu {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            padding: 12px 24px;
            background: transparent;
            color: #2d2654;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 15px;
        }
        
        .nav-btn:hover {
            background: #f0f0f0;
        }
        
        .nav-btn.active {
            background: linear-gradient(135deg, #2d2654 0%, #3b9fc9 100%);
            color: white;
        }
        
        .logout-btn {
            margin-left: 15px;
        }
        
        .content {
            max-width: 1400px;
            margin: 40px auto;
            padding: 0 30px;
        }
        
        .page {
            display: none;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        .page.active {
            display: block;
        }
        
        .page-title {
            color: #2d2654;
            margin-bottom: 30px;
            font-size: 32px;
            border-bottom: 4px solid #3b9fc9;
            padding-bottom: 15px;
        }
        
        /* TABS */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            padding: 15px 30px;
            background: #f5f5f5;
            color: #2d2654;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .tab-btn:hover {
            background: #e8e8e8;
        }
        
        .tab-btn.active {
            background: linear-gradient(135deg, #2d2654 0%, #3b9fc9 100%);
            color: white;
            border-color: #2d2654;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* CONTENT SECTIONS (pour Planning, Plan) */
        .content-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #3b9fc9;
        }
        
        .content-section h3 {
            color: #2d2654;
            margin-bottom: 15px;
            font-size: 22px;
        }
        
        .content-section p {
            color: #555;
            line-height: 1.8;
            font-size: 15px;
        }
        
        /* GROUPE / ATELIER CARD */
        .groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .group-card {
            background: #f0f8ff; /* Couleur de fond plus claire */
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            border: 1px solid #cceeff;
            transition: transform 0.2s;
        }

        .group-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
        }

        .group-card h4 {
            color: #2d2654;
            margin-bottom: 10px;
            font-size: 18px;
            border-bottom: 2px solid #3b9fc9;
            padding-bottom: 5px;
        }

        .group-card ul {
            list-style: none;
            padding-left: 0;
            max-height: 200px;
            overflow-y: auto;
        }

        .group-card ul li {
            padding: 5px 0;
            color: #555;
            border-bottom: 1px dotted #e0e0e0;
            font-size: 15px;
        }
        
        /* Le reste des styles (Personal, Contact) reste le m√™me */
        .participants-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        
        .participant-item {
            background: white;
            padding: 12px 15px;
            border-radius: 8px;
            border-left: 3px solid #3b9fc9;
            font-size: 14px;
            color: #2d2654;
        }
        
        .personal-search {
            background: linear-gradient(135deg, #2d265415 0%, #3b9fc915 100%);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .search-form {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 15px;
            align-items: end;
        }
        
        .search-form input {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
        }
        
        .search-result {
            background: #e8f5e9;
            border: 2px solid #4caf50;
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
        }
        
        .result-title {
            color: #2d2654;
            font-size: 24px;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .program-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #3b9fc9;
        }
        
        .program-title {
            font-size: 18px;
            font-weight: 600;
            color: #2d2654;
            margin-bottom: 8px;
        }
        
        .program-info {
            color: #666;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .contact-form {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
        }
        
        .contact-form h3 {
            color: #2d2654;
            margin-bottom: 20px;
            font-size: 22px;
        }
        
        .form-field {
            margin-bottom: 20px;
        }
        
        .form-field label {
            display: block;
            margin-bottom: 8px;
            color: #2d2654;
            font-weight: 600;
        }
        
        .form-field input,
        .form-field textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 15px;
            font-family: inherit;
        }
        
        .form-field textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid #c3e6cb;
        }
        
        .info-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 20px;
            border-radius: 10px;
            margin-top: 25px;
            color: #856404;
        }
        .login-logo-container{
                display: flex;
                justify-content: center;
                align-items: center;
                margin: 0 auto 20px;
                width: 80 %;
                max-width: 200 px;
                height: auto;
                padding: 10px 0;
            }
            .login-logo{
                height: auto;
                max-height: 80px;
                width: 100%;
                object-fit: contain;
            }
        
        @media (max-width: 768px) {
            .search-form {
                grid-template-columns: 1fr;
            }
            
            .navbar-menu {
                gap: 5px;
            }
            
            .nav-btn {
                padding: 10px 15px;
                font-size: 13px;
            }
            .navbar-content {
                flex-direction: column;
                align-items: flex-start;
            }
            .navbar-menu {
                margin-top: 15px;
            }
            .logout-btn {
                margin-left: 0;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    
    <div class="login-container" id="loginContainer">
        <div class="login-box">
            <div class="login-logo-container">
                <img src="images/logo.jpg" alt = "Logo" class="login-logo">
            </div>
            <h2>üîê Acc√®s Internat Brest</h2>
            <form id="loginForm">
                <input type="password" id="passwordInput" placeholder="Mot de passe" required>
                <div class="login-error" id="loginError">Mot de passe incorrect.</div>
                <button type="submit" class="btn">Se Connecter</button>
            </form>
        </div>
    </div>
    
    <div class="app-container" id="appContainer">
        <nav class="navbar">
            <div class="navbar-content">
                <div class="navbar-brand">
                    <img src="images/logo.jpg" alt="Logo" class="navbar-logo">
                </div>
                <div class="navbar-menu">
                    <button class="nav-btn active" onclick="showPage('planning', event)">Planning</button>
                    <button class="nav-btn" onclick="showPage('ateliers', event)">Ateliers/Groupes</button>
                    <button class="nav-btn" onclick="showPage('plan', event)">Plan</button>
                    <button class="nav-btn" onclick="showPage('personal', event)">Mon Programme</button>
                    <button class="nav-btn" onclick="showPage('contact', event)">Contact</button>
                    <button class="logout-btn btn" onclick="logout()">D√©connexion</button>
                </div>
            </div>
        </nav>

        <div class="content">
            <div id="planningPage" class="page active">
                <h1 class="page-title">üìÖ Planning G√©n√©ral</h1>
                <div id="planningContent"></div>
            </div>

            <div id="ateliersPage" class="page">
                <h1 class="page-title">üé® Ateliers & Groupes</h1>
                
                <div class="tabs">
                    <button class="tab-btn active" onclick="showTab(1, event)">Atelier 1: 09h30</button>
                    <button class="tab-btn" onclick="showTab(2, event)">Atelier 2: 10h30</button>
                    <button class="tab-btn" onclick="showTab(3, event)">Atelier 3: 11h30</button>
                    <button class="tab-btn" onclick="showTab(4, event)">Atelier 4: 14h30</button>
                    <button class="tab-btn" onclick="showTab(5, event)">Atelier 5: 15h30</button>
                    <button class="tab-btn" onclick="showTab(6, event)">Atelier 6: 16h30</button>
                    <button class="tab-btn" onclick="showTab('visite', event)">Visite des sites</button>
                </div>
                
                <div id="atelier1" class="tab-content active"></div>
                <div id="atelier2" class="tab-content"></div>
                <div id="atelier3" class="tab-content"></div>
                <div id="atelier4" class="tab-content"></div>
                <div id="atelier5" class="tab-content"></div>
                <div id="atelier6" class="tab-content"></div>
                <div id="ateliervisite" class="tab-content"></div> </div>

            <div id="planPage" class="page">
                <h1 class="page-title">üó∫Ô∏è Plan des Lieux</h1>
                <div id="planContent"></div>
            </div>

            <div id="personalPage" class="page">
                <h1 class="page-title">üë§ Mon Programme Personnalis√©</h1>
                
                <div class="personal-search">
                    <h3 style="color: #2d2654; margin-bottom: 20px; font-size: 22px;">Rechercher mon programme</h3>
                    <form id="personalForm" class="search-form">
                        <input type="text" id="firstName" placeholder="Pr√©nom" required>
                        <input type="text" id="lastName" placeholder="Nom" required>
                        <button type="submit" class="btn" style="width: auto; padding: 15px 40px;">Rechercher</button>
                    </form>
                    
                    <div id="personalResult"></div>
                </div>
                
                <div class="info-box">
                    üí° <strong>Information :</strong> Entrez votre pr√©nom et nom pour consulter votre programme personnalis√© incluant vos ateliers et activit√©s.
                </div>
            </div>

            <div id="contactPage" class="page">
                <h1 class="page-title">üìß Contact</h1>
                
                <div class="contact-form">
                    <h3>Un probl√®me ? Contactez-nous</h3>
                    <form id="contactForm">
                        <div class="form-field">
                            <label>Nom complet</label>
                            <input type="text" id="contactName" required>
                        </div>
                        <div class="form-field">
                            <label>Email</label>
                            <input type="email" id="contactEmail" required>
                        </div>
                        <div class="form-field">
                            <label>Sujet</label>
                            <input type="text" id="contactSubject" required>
                        </div>
                        <div class="form-field">
                            <label>Message</label>
                            <textarea id="contactMessage" required></textarea>
                        </div>
                        <button type="submit" class="btn">Envoyer</button>
                    </form>
                    <div id="contactSuccess"></div>
                </div>
                
                <div class="info-box" style="margin-top: 30px;">
                    üìû <strong>Autres moyens de contact :</strong><br>
                    T√©l√©phone : XX XX XX XX XX<br>
                    Email : contact@internat-brest.fr
                </div>
            </div>
        </div>
    </div>

<script>
    // ==================== CONFIGURATION ====================
    const COMMON_PASSWORD = "brest2025"; // ‚ö†Ô∏è Mot de passe
    const IS_LOGGED_IN_KEY = 'internatLoggedIn';

    // DONN√âES √Ä PERSONNALISER
    const DATA = {
        planning: [
            { date: '2025-10-31', time: '09:00', title: 'Accueil des participants', location: 'Amphith√©√¢tre 1', description: 'Mot de bienvenue, d√©roul√© de la journ√©e' },
            { date: '2025-10-31', time: '09:30', title: 'Atelier 1', location: 'Selon les groupes'},
            { date: '2025-10-31', time: '10:30', title: 'Atelier 2', location: 'Selon les groupes'},
            { date: '2025-10-31', time: '11:30', title: 'Atelier 3', location: 'Selon les groupes'},
            { date: '2025-10-31', time: '12:30', title: 'Pause Midi', location: 'Libre', description : 'Repas libre'},
            { date: '2025-10-31', time: '14:30', title: 'Atelier 4', location: 'Selon les groupes'},
            { date: '2025-10-31', time: '15:30', title: 'Atelier 5', location: 'Selon les groupes'},
            { date: '2025-10-31', time: '16:30', title: 'Atelier 6', location: 'Selon les groupes'},
            { date: '2025-10-31', time: '17:30', title: 'Pot de fin de journ√©e', location: 'Hall Facult√© de m√©decine', description: "Offert par l'ABIRA" },
            { date: '2025-10-31', time: '20:00', title: 'Soir√©e d\'int√©gration', location: 'Bar le Pipeline, Rue de Siam', description: 'Soir√©e commune MIG 29 & ABIRA'}
        ],
        ateliers: {
            1: { title: '09h30', horaire: '09h30 - 10h15', groupes: [ { name: 'Personne Ag√©e', location: 'A voir', members: ['Jean Dupont','Marie Martin','Alice Girard','Mathis Leroy'] }, { name: 'Transfusion', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Parcours Patient', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Prescription et Sortie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: "Gestion de l\'urgence", members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Sonde Naso-gastrique', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Sonde urinaire', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Suture', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Antibioth√©rapie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Courriers de sortie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] } ] },
            2: { title: '10h30', horaire: '10h30 - 11h15', groupes: [ { name: 'Personne Ag√©e', location: 'A voir', members: ['Jean Dupont','Marie Martin','Alice Girard','Mathis Leroy'] }, { name: 'Transfusion', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Parcours Patient', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Prescription et Sortie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: "Gestion de l\'urgence", members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Sonde Naso-gastrique', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Sonde urinaire', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Suture', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Antibioth√©rapie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Courriers de sortie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] } ] },
            3: { title: '11h30', horaire: '11h30 - 12h15', groupes: [ { name: 'Personne Ag√©e', location: 'A voir', members: ['Jean Dupont','Marie Martin','Alice Girard','Mathis Leroy'] }, { name: 'Transfusion', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Parcours Patient', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Prescription et Sortie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: "Gestion de l\'urgence", members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Sonde Naso-gastrique', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Sonde urinaire', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Suture', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Antibioth√©rapie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Courriers de sortie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] } ] },
            4: { title: '14h30', horaire: '14h30 - 15h15', groupes: [ { name: 'Personne Ag√©e', location: 'A voir', members: ['Jean Dupont','Marie Martin','Alice Girard','Mathis Leroy'] }, { name: 'Transfusion', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Parcours Patient', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Prescription et Sortie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: "Gestion de l\'urgence", members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Sonde Naso-gastrique', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Sonde urinaire', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Suture', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Antibioth√©rapie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Courriers de sortie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] } ] },
            5: { title: '15h30', horaire: '15h30 - 16h15', groupes: [ { name: 'Personne Ag√©e', location: 'A voir', members: ['Jean Dupont','Marie Martin','Alice Girard','Mathis Leroy'] }, { name: 'Transfusion', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Parcours Patient', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Prescription et Sortie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: "Gestion de l\'urgence", members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Sonde Naso-gastrique', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Sonde urinaire', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Suture', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Antibioth√©rapie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Courriers de sortie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] } ] },
            6: { title: '16h30', horaire: '16h30 - 17h15', groupes: [ { name: 'Personne Ag√©e', location: 'A voir', members: ['Jean Dupont','Marie Martin','Alice Girard','Mathis Leroy'] }, { name: 'Transfusion', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Parcours Patient', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Prescription et Sortie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: "Gestion de l\'urgence", members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Sonde Naso-gastrique', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Sonde urinaire', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Suture', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Antibioth√©rapie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] }, { name: 'Courriers de sortie', members: ['Sophie Bernard','Lucas Petit','Nathan Andr√©','Clara Lambert'] } ] },
            'visite': { title: 'Visite des sites', location: 'Rendez-vous Hall de la facult√© pour Morvan, Verri√®re CHU pour la Cavale Blanche', horaire: 'Morvan : Matin 11h30, Apr√®s-midi 16h30. Cavale Blanche : Matin 12h00, Apr√®s-midi 17h00', groupes: [ { name: 'Morvan Matin', members: ['Jean Dupont','Marie Martin','Sophie Bernard','Lucas Petit','Emma Dubois','Thomas Moreau'] }, { name: 'Cavale Blanche Matin', members: ['L√©a Laurent','Hugo Simon','Chlo√© Robert','Maxime Richard','Julie Bonnet','Antoine Garnier'] }, { name: 'Morvan Apr√®s-midi', members: ['Camille Roux','Paul Fournier','Sarah Mercier','Louis Blanc','Alice Girard','Nathan Andr√©'] }, { name: 'Cavale Blanche Apr√®s-Midi', members: ['Clara Lambert','Mathis Leroy','Manon Fontaine','Gabriel Rousseau','In√®s Chevalier','Alexandre Vincent'] } ] }
        },
        lieux: [
            { name: 'Amphith√©√¢tre 1', building: 'Facult√© de m√©decine - Niveau -1', description: 'Tout au bout du hall' },
            { name: 'Amphith√©√¢tre 2', building: 'Facult√© de m√©decine - Niveau -1', description: "Accol√© √† amphi 1" },
            { name: 'TD', building: 'B√¢timent Principal - 1er √©tage', description: 'Espace de travail calme avec ordinateurs et ressources documentaires' },
            { name: 'XX', building: 'XX', description: 'XX' }
        ]
    };

    // ==================== AUTHENTIFICATION ====================
    const loginForm = document.getElementById('loginForm');
    loginForm.addEventListener('submit', login);

    function login(e) {
        e.preventDefault();
        const passwordInput = document.getElementById('passwordInput');
        const loginError = document.getElementById('loginError');
        const enteredPassword = passwordInput.value.trim();
        console.log("Mot de passe saisi :", enteredPassword);
        console.log("Mot de passe attendu :", COMMON_PASSWORD);
        
        if (enteredPassword === COMMON_PASSWORD) {
            localStorage.setItem(IS_LOGGED_IN_KEY, 'true');
            console.log("Connexion r√©ussie, redirection...");
            showApp();
        } else {
            loginError.style.display = 'block';
            passwordInput.value = '';
            passwordInput.focus();
            console.log("√âchec de connexion");
        }
    }


    function logout() {
        localStorage.removeItem(IS_LOGGED_IN_KEY);
        document.getElementById('appContainer').style.display = 'none';
        document.getElementById('loginContainer').style.display = 'flex';
        document.getElementById('loginError').style.display = 'none';
    }

    function showApp() {
        document.getElementById('loginContainer').style.display = 'none';
        document.getElementById('appContainer').style.display = 'block';
        document.getElementById('loginError').style.display = 'none';
        loadAllData();
    }

    function init() {
        console.log("Initialisation...");
        const isLoggedIn = localStorage.getItem(IS_LOGGED_IN_KEY);
        console.log("Statut de connexion :", isLoggedIn);
        
        if (isLoggedIn === 'true') {
            console.log("Utilisateur connect√©, affichage de l'app");
            showApp();
        } else {
            console.log("Utilisateur non connect√©, affichage du login");
            logout();
        }
    }
    window.onload = init;


    // ==================== NAVIGATION ====================
    function showPage(pageName, event) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));

        document.getElementById(pageName + 'Page').classList.add('active');

        if (event && event.target) {
            event.target.classList.add('active');
        } else {
            const btn = document.querySelector(`.nav-btn[onclick*="${pageName}"]`);
            if (btn) btn.classList.add('active');
        }

        if (pageName === 'ateliers') showTab(1);
    }

    function showTab(tabIdentifier, event) {
        document.querySelectorAll('#ateliersPage .tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('#ateliersPage .tab-content').forEach(c => c.classList.remove('active'));

        const tabButton = event ? event.target : document.querySelector(`.tab-btn[onclick*="showTab(${tabIdentifier}"]`);
        const contentId = 'atelier' + tabIdentifier;
        if (tabButton) tabButton.classList.add('active');
        const contentDiv = document.getElementById(contentId);
        if (contentDiv) contentDiv.classList.add('active');
    }

    // ==================== LOAD DATA ====================
    function loadAllData() {
        loadPlanning();
        loadAteliers();
        loadPlan();
        showPage('planning');
    }

    function loadPlanning() {
        const container = document.getElementById('planningContent');
        container.innerHTML = DATA.planning.map(event => {
            const dateObj = new Date(event.date);
            const dateFormatted = dateObj.toLocaleDateString('fr-FR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            return `<div class="content-section">
                        <h3>${event.title}</h3>
                        <p><strong>üìÖ Date :</strong> ${dateFormatted} √† ${event.time}</p>
                        <p><strong>üìç Lieu :</strong> ${event.location}</p>
                        <p>${event.description || ''}</p>
                    </div>`;
        }).join('');
    }

    function loadAteliers() {
        Object.keys(DATA.ateliers).forEach(key => {
            const atelier = DATA.ateliers[key];
            const container = document.getElementById('atelier' + key);
            if (!container) return;

            let html = `<div class="content-section" style="border-left-color: #2d2654;">
                            <h3>${atelier.title}</h3>
                            <p><strong>üïê Horaires :</strong> ${atelier.horaire}</p>
                        </div>
                        <h3 class="page-title" style="font-size: 24px; border-bottom: none; margin-top: 30px;">Composition des Groupes</h3>
                        <div class="groups-grid">`;

            html += atelier.groupes.map(g => `<div class="group-card">
                        <h4>${g.name}</h4>
                        ${g.location ? `<p style="color: #3b9fc9; font-weight: 600; margin-bottom: 10px;">üìç ${g.location}</p>` : ''}
                        <ul>${g.members.map(m => `<li>${m}</li>`).join('')}</ul>
                    </div>`).join('');

            html += '</div>';
            container.innerHTML = html;
        });
    }

    function loadPlan() {
        const container = document.getElementById('planContent');
        container.innerHTML = DATA.lieux.map(lieu => `<div class="content-section">
                        <h3>${lieu.name}</h3>
                        <p><strong>üè¢ Localisation :</strong> ${lieu.building}</p>
                        <p>${lieu.description}</p>
                    </div>`).join('');
    }

    // ==================== PERSONAL PROGRAM ====================
    document.getElementById('personalForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const firstName = document.getElementById('firstName').value.trim();
        const lastName = document.getElementById('lastName').value.trim();
        const fullName = `${firstName} ${lastName}`;
        const personalResult = document.getElementById('personalResult');
        personalResult.innerHTML = '';

        const userPrograms = [];
        let isUserFound = false;

        Object.keys(DATA.ateliers).forEach(key => {
            const atelier = DATA.ateliers[key];
            atelier.groupes.forEach(g => {
                if (g.members.some(m => m.toLowerCase() === fullName.toLowerCase())) {
                    isUserFound = true;
                    userPrograms.push({ title: atelier.title, groupeName: g.name, horaire: atelier.horaire, location: atelier.location });
                }
            });
        });

        if (isUserFound) {
            let html = `<div class="search-result"><div class="result-title">Programme de ${fullName}</div>`;
            userPrograms.forEach(p => {
                const type = p.title.includes('Visite') ? 'Visite' : 'Atelier';
                const color = type === 'Visite' ? '#3b9fc9' : '#2d2654';
                html += `<div class="program-item" style="border-left-color:${color};">
                            <div class="program-title">${type === 'Visite' ? 'üó∫Ô∏è ' : 'üé® '}${p.title}</div>
                            <div class="program-info"><strong>Groupe :</strong> ${p.groupeName}</div>
                            <div class="program-info"><strong>Horaires :</strong> ${p.horaire}</div>
                            <div class="program-info"><strong>Lieu :</strong> ${p.location}</div>
                        </div>`;
            });
            html += `</div>`;
            personalResult.innerHTML = html;
        } else {
            personalResult.innerHTML = `<div class="info-box" style="border-color:#e74c3c; background:#fbecec; color:#c0392b;">
                                        ‚ö†Ô∏è <strong>Aucun programme trouv√©</strong> pour ${fullName}. V√©rifiez l'orthographe ou contactez l'administration.
                                      </div>`;
        }
    });

    // ==================== CONTACT FORM ====================
    document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const successDiv = document.getElementById('contactSuccess');
        successDiv.innerHTML = '<div class="success-message">‚úÖ Votre message a √©t√© envoy√© avec succ√®s ! Nous vous recontacterons sous peu.</div>';
        document.getElementById('contactForm').reset();
        setTimeout(() => successDiv.innerHTML = '', 5000);
    });

    // ==================== INITIALISATION ====================
    window.onload = init;
</script>
